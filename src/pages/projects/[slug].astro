---
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar.astro';
import ProjectDetail from '../../components/ProjectDetail.astro';
import type { MarkdownInstance } from 'astro';

interface ProjectFrontmatter {
  title: string;
  slug: string;
  description?: string;
  repo?: string;
  tech?: string[];
  date?: string;
  image?: string;
}

export async function getStaticPaths() {
  const projects: MarkdownInstance<ProjectFrontmatter>[] = await Astro.glob('../../content/projects/*.md');

  return projects.map((project) => ({
    params: { 
      slug: project.frontmatter.slug 
    }, 
    props: { 
      project 
    },
  }));
}

interface Props {
  project: MarkdownInstance<ProjectFrontmatter>;
}

const { project } = Astro.props;
const frontmatter = project.frontmatter;
const Content = project.Content;
---

<Layout title={frontmatter.title}>
  <Navbar />
  
  <ProjectDetail frontmatter={frontmatter}>
    <Content />
  </ProjectDetail>
</Layout>